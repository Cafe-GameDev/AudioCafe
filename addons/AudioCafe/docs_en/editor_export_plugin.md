# `editor_export_plugin.gd` Script

The `editor_export_plugin.gd` is a script that extends the `EditorExportPlugin` functionality of the Godot Engine. It is crucial to ensure that audio resources generated by AudioCafe are correctly included in the exported builds of your project.

## Purpose

When a Godot game is exported, not all resources are automatically included. Dynamically generated or specifically referenced resources may be omitted if not explicitly handled. This export plugin ensures that `audio_manifest.tres` and all `.tres` audio resources referenced by it (playlists, randomizers, synchronized, interactive) are packaged in the final build, making them available at runtime.

## Extends

`EditorExportPlugin`

## Implemented Methods

*   **`_export_begin(features, is_debug, path, flags)`**: This method is called at the beginning of the export process. It can be used to perform configurations or checks before files are packaged. Currently, it has no specific implementation in AudioCafe, but it is part of the `EditorExportPlugin` interface.
    *   `features`: Array of strings with active export features (e.g., `"windows"`, `"debug"`).
    *   `is_debug`: Boolean indicating whether the export is for a debug build.
    *   `path`: The full path to the export output file.
    *   `flags`: Additional export flags.

*   **`_export_file(path, type, features)`**: This method is called for each file being considered for inclusion in the export. This is where the logic for including specific resources can be implemented. In the context of AudioCafe, this method would be used to ensure that `audio_manifest.tres` and all generated `.tres` audio files are included.
    *   `path`: The path of the file being processed.
    *   `type`: The resource type of the file (e.g., `"PackedScene"`, `"Resource"`).
    *   `features`: Array of strings with active export features.

## How it Works in AudioCafe

Although the current implementation only shows `pass` for the methods, the intention is for this plugin to be activated to ensure the inclusion of audio resources. In a complete implementation, `_export_file` would be used to:

1.  Identify `audio_manifest.tres`.
2.  Add `audio_manifest.tres` to the list of files to be exported.
3.  Iterate over the dictionaries within `audio_manifest.tres` (playlists, randomizers, synchronized, interactive).
4.  For each audio resource listed in the manifest, ensure that its corresponding `.tres` is also added to the export.

This prevents generated audio from working perfectly in the editor but failing in exported builds due to the absence of `.tres` files.

```mermaid
graph TD
    EEC[editor_export_plugin.gd]:::script
    GE[Godot Engine]

    EEC -- "Extends" --> GE
    EEC -- "_export_begin(features, is_debug, path, flags)" --> GE
    EEC -- "_export_file(path, type, features)" --> GE

    classDef script fill:#DDEEFF,stroke:#3366CC,stroke-width:1px
    style EEC fill:#f9f,stroke:#333,stroke-width:2px

    %% Description
    EEC -- "Editor export plugin. Ensures audio resources are included in the final build."
```